





























$popoveritem-height: 38px;
$popovericon-size: 16px;


li {
	display: flex;
	flex: 0 0 auto;
	> button,
	> a,
	> .menuitem {
		cursor: pointer;
		line-height: $popoveritem-height;
		border: 0;
		background-color: transparent;
		display: flex;
		align-items: flex-start;
		height: auto;
		margin: 0;
		font-weight: 300;
		box-shadow: none;
		width: 100%;
		color: $color-main-text;
		/* Override the app-navigation li opacity */
		opacity: 0.7 !important;
		span[class^='icon-'],
		span[class*=' icon-'],
		&[class^='icon-'],
		&[class*=' icon-'] {
			min-width: 0; /* Overwrite icons*/
			min-height: 0;
			background-position: #{($popoveritem-height - $popovericon-size) / 2} center;
			background-size: $popovericon-size;
		}
		span[class^='icon-'],
		span[class*=' icon-'] {
			/* Keep padding to define the width to
				assure correct position of a possible text */
			padding: #{$popoveritem-height / 2} 0 #{$popoveritem-height / 2} $popoveritem-height;
		}
		// If no icons set, force left margin to align
		&:not([class^='icon-']):not([class*='icon-']) {
			> span,
			> input,
			> form {
				&:not([class^='icon-']):not([class*='icon-']):first-child {
					margin-left: $popoveritem-height;
				}
			}
		}
		&[class^='icon-'],
		&[class*=' icon-'] {
			padding: 0 #{($popoveritem-height - $popovericon-size) / 2} 0 $popoveritem-height !important;
		}
		&:hover,
		&:focus,
		&.active {
			opacity: 1 !important;
		}
		/* prevent .action class to break the design */
		&.action {
			padding: inherit !important;
		}
		> span {
			cursor: pointer;
			white-space: nowrap;
		}
		> p {
			width: 150px;
			line-height: 1.6em;
			padding: 8px 0;
		}
		> select {
			margin: 0;
			margin-left: 6px;
		}
		/* Add padding if contains icon+text */
		&:not(:empty) {
			padding-right: 10px !important;
		}
		/* DEPRECATED! old img in popover fallback
		 * TODO: to remove */
		> img {
			width: $popovericon-size;
			padding: #{($popoveritem-height - $popovericon-size) / 2};
		}
		/* checkbox/radio fixes */
		> input.radio + label,
		> input.checkbox + label {
			padding: 0 !important;
			width: 100%;
		}
		> input.checkbox + label::before {
			margin: -2px 13px 0;
		}
		> input.radio + label::before {
			margin: -2px 12px 0;
		}
		> input:not([type='radio']):not([type='checkbox']):not([type='image']) {
			width: 150px;
		}
		form {
			display: flex;
			flex: 1 1 auto;
			/* put a small space between text and form
				if there is an element before */
			&:not(:first-child) {
				margin-left: 5px;
			}
		}
		/* no margin if hidden span before */
		> span.hidden + form,
		> span[style*='display:none'] + form {
			margin-left: 0;
		}
		/* Inputs inside popover supports text, submit & reset */
		input {
			min-width: #{$popoveritem-height - 4px}; /* twice the margin */
			max-height: #{$popoveritem-height - 4px}; /* twice the margin */
			margin: 2px 0;
			flex: 1 1 auto;
			&:not(:first-child) {
				margin-left: 5px;
			}
		}
	}
	/* css hack, only first not hidden*/
	&:not(.hidden):not([style*='display:none']) {
		&:first-of-type {
			> button,
			> a,
			> .menuitem {
				> form,
				> input {
					margin-top: 10px;
				}
			}
		}
		&:last-of-type {
			> button,
			> a,
			> .menuitem {
				> form,
				> input {
					margin-bottom: 10px;
				}
			}
		}
	}
	> button {
		padding: 0;
		span {
			opacity: 1;
		}
	}
}












































.popovermenu {
	position: absolute;
	background-color: $color-main-background;
	color: $color-main-text;
	border-radius: $border-radius;
	z-index: 110;
	margin: 5px;
	margin-top: -5px;
	right: 0;
	filter: drop-shadow(0 1px 3px $color-box-shadow);
	display: none;

	&:after {
		bottom: 100%;
		/* Min-width of popover is 36px and arrow width is 20px
		wich leaves us 8px right and 8px left */
		right: 8px;
		/* change this to adjust the arrow position */
		border: solid transparent;
		content: ' ';
		height: 0;
		width: 0;
		position: absolute;
		pointer-events: none;
		border-bottom-color: $color-main-background;
		border-width: 10px;
	}
	/* Center the popover */
	&.menu-center {
		transform: translateX(50%);
		right: 50%;
		margin-right: 0;
		&:after {
			right: 50%;
			transform: translateX(50%);
		}
	}
	/* Align the popover to the left */
	&.menu-left {
		right: auto;
		left: 0;
		margin-right: 0;
		&:after {
			left: 6px;
			right: auto;
		}
	}

	&.open {
		display: block;
	}

	ul {
		/* Overwrite #app-navigation > ul ul */
		display: flex !important;
		flex-direction: column;
	}
}
